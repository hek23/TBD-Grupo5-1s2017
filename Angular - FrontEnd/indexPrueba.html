<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Migrations</title>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        
        <link rel="stylesheet" type="text/css" href="./styles/main.css">
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"   integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc="   crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-route.min.js"></script>
        <script src="js/app.js"></script>
        <script src="js/controllers/mainCtrl.js"></script>
        <script src="js/controllers/aboutCtrl.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
        
    </head>

    <body ng-app="angularSpa">

      
<nav class="navbar navbar-default">
  <ul class="nav navbar-nav navbar-right">
    <li><a href="#/home">Inicio</a></li>
    <li><a href="#/gTorta">Gráfico de Torta</a></li>
  </ul>
</nav>

<center>
<div class="container">
    <img class="logo" src="img/angular.png" alt="logo">
    <div ng-view=""></div>
</div>
</center>
<span class="ir-arriba icon-arrow-up"></span>
    <section class="fondo final">
        <header class="envoltura final">
        </header>

        <div class="caption final animated wow fadeInDown clearfix">
            <h1>World War III Project</h1>
            <p>Algún eslogan va aquí</p>
            <hr>
        </div>
        <div class="shadow"></div>
    </section>


    <section id="mision" class="misionVision envoltura">
        <ul class="clearfix">
            <li align= left class="animated wow fadeInDown">
                <img class="icon" src="img/icon1.png" alt=""/>
                <span class="separator"></span>
                <h2>Nuestra misión</h2>
                <p>Lograr bla bla bla bla bla bla.</p>
            </li>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <img class="icon" src="img/icon2.png" alt=""/>
                <span class="separator"></span>
                <h2>Nuestros objetivos</h2>
                <p>Hacer de bla bla bla bla bla bla.</p>
            </li>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".4s">
                <img class="icon" src="img/icon3.png" alt=""/>
                <span class="separator"></span>
                <h2>Alcance</h2>
                <p>Todo lo bla bla bla bla bla bla.</p>
            </li>
            </center>
        </ul>
    </section>

  <section id="equipo" class="testimonials envoltura">
      <center>
        <div class="title animated wow fadeIn">
            <h2>Equipo de trabajo</h2>
            <h3>BC TEAM</h3>
            <hr class="separator"/>
        </div>
</center>
        <ul class="clearfix">
      <center>
            <li class="animated wow fadeInDown">
                <div class="client">
                    <img src="img/client1.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Hector Fuentealba</h4>
                        <h5>Scrum Master</h5>
                    </div>
                </div>
            </li>
        </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Jean Cabello</h4>
                        <h5>Designer</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>José Camus</h4>
                        <h5>AngularJS</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Cristian Lineros</h4>
                        <h5>Desarrollador</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>David Aguilar</h4>
                        <h5>Desarrollador</h5>
                    </div>
                </div>
            </li>
                </center>

        </ul>
    </section><!--  End testimonials  -->


        
    

<!--Código referente a Gráfico Torta -->

<section class="fondo final">
        <header class="envoltura final">
        </header>

        <div class="caption final animated wow fadeInDown clearfix">
            <h1>Análisis con Gráfico de Torta</h1>
            <section id="gTorta" ng-controller="controladorDatosTorta"><p>A continuación se muestra un gráfico de torta.</p>
            <p>Este gráfico contiene información acerca de la cantidad de tweets realizados en cada país.</p>
            <p>Puede interactuar con el gráfico.</p>
            <p>La cantidad de países analizados fueron {{dataTorta.cantidadPaises}}</p>
            <p>La cantidad de tweets analizados en total fueron {{ctdtweets}}</p>
            <p>La muestra fue tomada el día XXX</p>
            </section>
            
            <p><br/><br/><br/><br/><br/><br/><br/><br/>

            </p>
        </div>
        <div class="shadow"></div>
    <canvas id="myPieChart" width="400" height="400"></canvas> 
    <br/><br/><br/><br/><br/><br/><br/><br/>
    
</section>
        
                
<script type="text/javascript">
    var misDatosTorta = angular.module('angularSpa').controller('controladorDatosTorta',function($scope,$http){
        $scope.importarTorta = function(){
            $http.get('datosTorta2.json').success(function(datos2){
                $scope.dataTorta = datos2;
                
                var torta = document.getElementById("myPieChart");
                //Aquí comencé a modificar
                //Creo arreglos auxiliares para guardar la data
                ejex = [];
                ejey = [];
                //Creo una variable auxiliar 0
                var i = 0;
                var ctdtweets = 0;
                //Ciclo for each. Para cada objeto de datos2.info, iterando sobre identificador y tweets
                angular.forEach(datos2.info, function(identificador, tweets){
                    //Se agregan los datos a las listas particulares
                    ejex.push(datos2.info[i].identificador);
                    ejey.push(datos2.info[i].tweets)
                    ctdtweets = datos2.info[i].tweets + ctdtweets;
                    //Se avanza en el contrador auxiliar
                    i = i +1;
                });
                $scope.ctdtweets = ctdtweets;
                
                var dataTorta = {
                    labels:
                    //Aquí aplique la lista de eje x que son las labels
                            ejex,
                        
                        datasets: [
                            {
                                //Aquí aplique la lista de eje y que son los tweets
                                data: ejey,
                                backgroundColor: ["#DD6FF9","#F0AA81","#AE256C","#ACE6BB","#EBDEAB","#E88477","#D78811","#9C0C26","#4FDB82","#97B32C","#B0A41D","#235E66","#D9A069","#AA8750","#9F753A","#2FAD3C","#A6FF55","#62F125","#ADF345","#3E5B38","#55702B","#CD2CD7","#13905C","#6F952E","#B6C020","#876079","#C46E03","#62703D","#C9C6FF","#5A61B8","#140748","#00C7FD","#B50353","#02DD8C","#DD73F2","#C06C8B","#49C10B","#EB1FF6","#2F80D1","#CAF4EF","#6A0D68","#8B25C2","#0BE1AD","#8DD1DA","#3A43E2","#25D223","#BBFD0B","#016F31","#DCEADC","#516944","#C6999B","#D57C37","#849F3C","#008FB6","#B071AB","#572F0C","#BE12A5","#A3932C","#02D918","#FD97E4","#34B53C","#2EA415","#9B82FA","#FFDD9F","#69CF0B","#43FF93","#BC1603","#C9E5CE","#FCEDA7","#C00901","#44433E","#6FA86A","#C24B71","#97E748","#F19FA9","#1FE532","#492F28","#AEAE92","#039FAE","#89F19A","#BAA90D","#C57E49","#6E81D1","#3E5CDF","#A69A73","#53EFDF","#C94378","#DE65F4","#722DFF","#CA664D","#AA18AE","#778BB0","#48FBEE","#F61130","#10B770","#51A794","#61CFD7","#F20EDF","#9C383F"],
                                
                                hoverBackgroundColor: 
                                ["#DD6FF9","#F0AA81","#AE256C","#ACE6BB","#EBDEAB","#E88477","#D78811","#9C0C26","#4FDB82","#97B32C","#B0A41D","#235E66","#D9A069","#AA8750","#9F753A","#2FAD3C","#A6FF55","#62F125","#ADF345","#3E5B38","#55702B","#CD2CD7","#13905C","#6F952E","#B6C020","#876079","#C46E03","#62703D","#C9C6FF","#5A61B8","#140748","#00C7FD","#B50353","#02DD8C","#DD73F2","#C06C8B","#49C10B","#EB1FF6","#2F80D1","#CAF4EF","#6A0D68","#8B25C2","#0BE1AD","#8DD1DA","#3A43E2","#25D223","#BBFD0B","#016F31","#DCEADC","#516944","#C6999B","#D57C37","#849F3C","#008FB6","#B071AB","#572F0C","#BE12A5","#A3932C","#02D918","#FD97E4","#34B53C","#2EA415","#9B82FA","#FFDD9F","#69CF0B","#43FF93","#BC1603","#C9E5CE","#FCEDA7","#C00901","#44433E","#6FA86A","#C24B71","#97E748","#F19FA9","#1FE532","#492F28","#AEAE92","#039FAE","#89F19A","#BAA90D","#C57E49","#6E81D1","#3E5CDF","#A69A73","#53EFDF","#C94378","#DE65F4","#722DFF","#CA664D","#AA18AE","#778BB0","#48FBEE","#F61130","#10B770","#51A794","#61CFD7","#F20EDF","#9C383F"],
                            }
                        ]
                    };
                
                var optionsTorta = 
                    {
        animation: {
            animateScale: true
        }
    };
                    
                // Chart declaration:
                var myPieChart = new Chart(torta, {
                    type: 'pie',
                    data: dataTorta,
                    options: optionsTorta
                });
            }                                                 );
                    }
                    $scope.importarTorta();
                }
            );

</script>

<!--Final Código Gráfico Torta -->


        
<!--Código referente a Gráfico Lineal--> 
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<section class="fondo final">
        <header class="envoltura final">
        </header>

        <div class="caption final animated wow fadeInDown clearfix">
            <h1>Análisis con Gráfico Lineal</h1>
            <section id="gTorta" ng-controller="controladorDatosLineal"><p>A continuación se muestra un gráfico lineal.</p>
            <p>Este gráfico contiene información acerca de la cantidad de tweets realizados en fechas específicas.</p>
            <p>Puede interactuar con el gráfico.</p>
            <p>La cantidad de países tópicos analizados XX </p>
            <p>La cantidad de tweets analizados en total fueron YY</p>
            </section>
            
            <p><br/><br/><br/><br/><br/><br/><br/><br/><p><br/><br/><br/><br/><br/><br/><br/><br/>

            </p>
        </div>
        <div class="shadow"></div>
    <canvas id="myLineChart" width="400" height="400"></canvas> 
    <br/><br/><br/><br/><br/><br/><br/><br/>

<script type="text/javascript">
var misDatosLineal = angular.module('angularSpa').controller('controladorDatosLineal',function($scope,$http){
        $scope.importarLineal = function(){
            $http.get('ejemplo2fechas.json').success(function(datosLineal){
                $scope.graficaLineal = datosLineal;
                
                
                var canvas = document.getElementById("myLineChart");
                var ctx = canvas.getContext('2d');
                
                
                
                // Global Options:
                Chart.defaults.global.defaultFontColor = 'black';
                Chart.defaults.global.defaultFontSize = 16;
                
                //Necesito 3 arreglos, 1 con las fechas, otro con los tópicos y otro con el número de menciones. El problema sería tweetsMenciones, me imaginaba una "matriz", algo como: 
                //tweetsMenciones= [[329, 280], [0, 50]];
                //fechasX= [28-May-2017","29-May-2017"]
                //topicos=["Trump", "Bashar"]
                
                var fechasX = [];
                var topicos = [];
                var tweetsMenciones = [];
                angular.forEach(datosLineal, function(concepto){
                    //Se agregan los datos a las listas particulares
                    console.log(concepto);
                });
                $scope.ctdtweets = ctdtweets;
                
                
                var dataLineal = {
                    //en labels van las fechas.
                    labels: fechasX,
                    //Este datasets debe ser dinámico por la cantidad de tópicos que existen, me imaginaba también un foreach dándole colores random en cada iteración y recorriendo los arreglos creados. Dejando fijas las demás opciones.
                    datasets: [
                        {
                            //label es el Concepto
                            label: topicos[0],
                            fill: false,
                            lineTension: 0.1,
                            backgroundColor: "rgba(225,0,0,0.4)",
                            borderColor: "red", // The main line color
                            borderCapStyle: 'square',
                            borderDash: [], // try [5, 15] for instance
                            borderDashOffset: 0.0,
                            borderJoinStyle: 'miter',
                            pointBorderColor: "black",
                            pointBackgroundColor: "white",
                            pointBorderWidth: 1,
                            pointHoverRadius: 8,
                            pointHoverBackgroundColor: "yellow",
                            pointHoverBorderColor: "brown",
                            pointHoverBorderWidth: 2,
                            pointRadius: 4,
                            pointHitRadius: 10,
                            // notice the gap in the data and the spanGaps: true
                            //data es el arreglo de tweets
                            data: tweetsMenciones[0],
                            spanGaps: true,
                        }, 
                        {
                            label: topicos[1],
                            fill: false,
                            lineTension: 0.1,
                            backgroundColor: "rgba(167,105,0,0.4)",
                            borderColor: "rgb(167, 105, 0)",
                            borderCapStyle: 'butt',
                            borderDashOffset: 0.0,
                            pointBorderColor: "white",
                            pointBackgroundColor: "black",
                            pointBorderWidth: 1,
                            pointHoverRadius: 8,
                            pointHoverBorderWidth: 2,
                            pointRadius: 4,
                            pointHitRadius: 10,
                            data: tweetsMenciones[1],
                            spanGaps: true,
                        }
                    ]
                };

                var optionsLineal = 
                    {
                        scales: 
                        {
                            yAxes: 
                            [
                                {
                                    ticks: 
                                    {
                                        beginAtZero:true
                                    },
                                    scaleLabel: 
                                    {
                                        display: true,
                                        labelString: 'X vs Y',
                                        fontSize: 20 
                                    }
                                }
                            ]
                        }
                    };
                
                // Chart declaration:
                var myLineChart = new Chart(ctx, {
                    type: 'line',
                    data: dataLineal,
                    options: optionsLineal
                });
                        }
                                                       );
                    }
                    $scope.importarLineal();
                }
            );

</script>  
</section>
<!--Final Código Gráfico Lineal -->

</body>
</html>
