<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Migrations</title>
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        
        <link rel="stylesheet" type="text/css" href="./styles/main.css">
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"   integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc="   crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-route.min.js"></script>
        <script src="js/app.js"></script>
        <script src="js/controllers/mainCtrl.js"></script>
        <script src="js/controllers/aboutCtrl.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
        
    </head>

    <body ng-app="angularSpa">

      
<nav class="navbar navbar-default">
  <ul class="nav navbar-nav navbar-right">
    <li><a href="#/home">Inicio</a></li>
    <li><a href="#/gTorta">Gráfico de Torta</a></li>
  </ul>
</nav>


<div class="container">
    <img class="logo" src="img/angular.png" alt="logo">
    <h1>Angular SPA</h1>
    <div ng-view=""></div>
</div>

<span class="ir-arriba icon-arrow-up"></span>
    <section class="fondo final">
        <header class="envoltura final">
        </header>

        <div class="caption final animated wow fadeInDown clearfix">
            <h1>World War III Project</h1>
            <p>Algún eslogan va aquí</p>
            <hr>
        </div>
        <div class="shadow"></div>
    </section>


    <section id="mision" class="misionVision envoltura">
        <ul class="clearfix">
            <li align= left class="animated wow fadeInDown">
                <img class="icon" src="img/icon1.png" alt=""/>
                <span class="separator"></span>
                <h2>Nuestra misión</h2>
                <p>Lograr bla bla bla bla bla bla.</p>
            </li>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <img class="icon" src="img/icon2.png" alt=""/>
                <span class="separator"></span>
                <h2>Nuestros objetivos</h2>
                <p>Hacer de bla bla bla bla bla bla.</p>
            </li>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".4s">
                <img class="icon" src="img/icon3.png" alt=""/>
                <span class="separator"></span>
                <h2>Alcance</h2>
                <p>Todo lo bla bla bla bla bla bla.</p>
            </li>
            </center>
        </ul>
    </section>

  <section id="equipo" class="testimonials envoltura">
      <center>
        <div class="title animated wow fadeIn">
            <h2>Equipo de trabajo</h2>
            <h3>BC TEAM</h3>
            <hr class="separator"/>
        </div>
</center>
        <ul class="clearfix">
      <center>
            <li class="animated wow fadeInDown">
                <div class="client">
                    <img src="img/client1.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Hector Fuentealba</h4>
                        <h5>Scrum Master</h5>
                    </div>
                </div>
            </li>
        </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Jean Cabello</h4>
                        <h5>Designer</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>José Camus</h4>
                        <h5>AngularJS</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>Cristian Lineros</h4>
                        <h5>Desarrollador</h5>
                    </div>
                </div>
            </li>
                </center>
            <center>
            
            <li class="animated wow fadeInDown"  data-wow-delay=".2s">
                <div class="client">
                    <img src="img/client2.jpg" class="avatar"/>
                    <div class="client_details">
                        <h4>David Aguilar</h4>
                        <h5>Desarrollador</h5>
                    </div>
                </div>
            </li>
                </center>

        </ul>
    </section><!--  End testimonials  -->


        
        

<!--Código referente a Gráfico Torta -->

<section id="gTorta" ng-controller="controladorDatosTorta">
    <p>A continuación se muestra un gráfico de torta.</p>
    <p>Este gráfico contiene información acerca de la cantidad de tweets realizados en cada país.</p>
    <p>Puede interactuar con el gráfico.</p>
    <p>La cantidad de países analizados fueron {{dataTorta.cantidadPaises}}</p>
    <p>La cantidad de tweets analizados en total fueron {{ctdtweets}}</p>
    <p>La muestra fue tomada el día XXX</p>
    
    
    <canvas id="myPieChart" width="400" height="400"></canvas> 
</section>    
        
<script type="text/javascript">
    var misDatosTorta = angular.module('angularSpa', []);
    misDatosTorta.controller('controladorDatosTorta',function($scope,$http){
        $scope.importarTorta = function(){
            $http.get('http://localhost:8080/WW3App/auxiliarJsonFullCake').success(function(datos2){
                $scope.dataTorta = datos2;
                
                var torta = document.getElementById("myPieChart");
                //Aquí comencé a modificar
                //Creo arreglos auxiliares para guardar la data
                ejex = [];
                ejey = [];
                //Creo una variable auxiliar 0
                var i = 0;
                var ctdtweets = 0;
                //Ciclo for each. Para cada objeto de datos2.info, iterando sobre identificador y tweets
                angular.forEach(datos2.info, function(identificador, tweets){
                    //Se agregan los datos a las listas particulares
                    ejex.push(datos2.info[i].identificador);
                    ejey.push(datos2.info[i].tweets);
                    ctdtweets = datos2.info[i].tweets + ctdtweets;
                    //Se avanza en el contrador auxiliar
                    i = i +1;
                });
                console.log(ctdtweets); 
                $scope.ctdtweets = ctdtweets;
                var dataTorta = {
                    labels:
                    //Aquí aplique la lista de eje x que son las labels
                            ejex,
                        
                        datasets: [
                            {
                                //Aquí aplique la lista de eje y que son los tweets
                                data: ejey,
                                backgroundColor: [
                                "#0bdd6f",
                                "#2931e7",
                                "#931c04",
                                "#d8cb01",
                                "#54808b",
                                "#a74086",
                                "#2b7968",
                                "#08978e",
                                "#0bd1c8",
                                "#bc1207",
                                "#4f8687",
                                "#32e2b8",
                                "#524c0b",
                                "#ee5578",
                                "#54d286"
                                ],
                                
                                hoverBackgroundColor: 
                                [
                                "#0bdd6f",
                                "#2931e7",
                                "#931c04",
                                "#d8cb01",
                                "#54808b",
                                "#a74086",
                                "#2b7968",
                                "#08978e",
                                "#0bd1c8",
                                "#bc1207",
                                "#4f8687",
                                "#32e2b8",
                                "#524c0b",
                                "#ee5578",
                                "#54d286"
                                ]
                            }
                        ]
                    };
                
                var optionsTorta = 
                    {
        animation: {
            animateScale: true
        }
    };
                    
                // Chart declaration:
                var myPieChart = new Chart(torta, {
                    type: 'pie',
                    data: dataTorta,
                    options: optionsTorta
                });
            }                                                 );
                    }
                    $scope.importarTorta();
                }
            );

</script> 

<!--Final Código Gráfico Torta -->
        
        
        
        
        
        
        
        
        
        
        
        
        
        
       
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        

        
        
        
        
 
        


        
        
        
        
        
        


</body>
</html>
